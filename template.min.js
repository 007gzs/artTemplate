/*artTemplate - Template Engine*/var template=function(d,g){return template["object"===typeof g?"render":"compile"].apply(template,arguments)};(function(d,g){d.version="1.1";d.openTag="<%";d.closeTag="%>";d.parser=null;d.render=function(a,c){var b;b=f[a];void 0===b&&!v?((b=document.getElementById(a))&&d.compile(a,b.value||b.innerHTML),b=f[a]):b=f.hasOwnProperty(a)?b:void 0;return void 0===b?j({id:a,name:"Render Error",message:"Not Cache"}):b(c)};d.compile=function(a,c,b,h){function n(h){try{return o.call(o.helpers,h)}catch(e){if(!p)return d.compile(a,c,b,!0)(h);e.id=a||c;e.name="Render Error";e.source=c;return j(e)}}var p=h;"string"!==typeof c&&(p=b,b=c,c=a,a=null);try{var o=w(c,b,p)}catch(k){return k.id=a||c,k.name="Syntax Error",j(k)}n.toString=function(){return o.toString()};a&&(f[a]=n);return n};d.helper=function(a,c){if(void 0===c)return l[a];l[a]=c};var f={},l={},q="".trim,v=q&&!g.document,w=function(a,c,b){function h(a){e+=a.split(/\n/).length-1;a=a.replace(/('|"|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");a=m[1]+"'"+a+"'"+m[2];return a+"\n"}function n(a){var c=e;k?a=k(a):b&&(a=a.replace(/\n/g,function(){e++;return"$line="+e+";"}));0===a.indexOf("=")&&(a=m[1]+(q?"$getValue(":"")+a.substring(1).replace(/[\s;]*$/,"")+(q?")":"")+m[2]);b&&(a="$line="+c+";"+a);p(a);return a+"\n"}function p(a){a=a.replace(/\/\*.*?\*\/|'[^']*'|"[^"]*"|\.[\$\w]+/g,"");r.call(a.split(/[^\$\w\d]+/),function(a){if(/^this$/.test(a))throw{message:'Prohibit the use of the "'+a+'"'};if(a&&!t.hasOwnProperty(a)&&!/^\d/.test(a)&&!g.hasOwnProperty(a)){var b;b="include"===a?l:s.has(c,a)?"$helpers."+a:"$data."+a;f+=a+"="+b+",";g[a]=!0}})}var c=new s(c||{}),o=d.closeTag,k=d.parser,i="",e=1,g={$out:!0,$line:!0},f="var $helpers=this,"+(b?"$line=0,":""),m=q?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],l="function(id,data){if(data===undefined){data=$data}return $helpers.$render(id,data)}";r.call(a.split(d.openTag),function(a){var a=a.split(o),b=a[0],c=a[1];1===a.length?i+=h(b):(i+=n(b),c&&(i+=h(c)))});a=i;b&&(a="try{"+a+"}catch(e){e.line=$line;throw e}");a=f+m[0]+a+"return "+m[3];try{var j=new Function("$data",a);j.helpers=c;return j}catch(u){throw u.temp="function anonymous($data) {"+a+"}",u;}},s=function(a){for(var c in a)this[c]=a[c]};s.prototype=l;s.has=function(a,c){return a.hasOwnProperty(c)||l.hasOwnProperty(c)};var j=function(a){function c(){return c+""}var b="[template]:\n"+a.id+"\n\n[name]:\n"+a.name;a.message&&(b+="\n\n[message]:\n"+a.message);a.line&&(b+="\n\n[line]:\n"+a.line,b+="\n\n[source]:\n"+a.source.split(/\n/)[a.line-1].replace(/^[\s\t]+/,""));a.temp&&(b+="\n\n[temp]:\n"+a.temp);g.console&&console.error(b);c.toString=function(){return"{Template Error}"};return c},r=Array.prototype.forEach||function(a,c){for(var b=this.length>>>0,d=0;d<b;d++)d in this&&a.call(c,this[d],d,this)},t={};r.call("break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield".split(","),function(a){t[a]=!0});d.helper("$forEach",r);d.helper("$render",d.render);d.helper("$getValue",function(a){return void 0===a?"":a})})(template,this);if("undefined"!==typeof module&&module.exports)module.exports=template;