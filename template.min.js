/*artTemplate - Template Engine*/var template=function(c,f){return template["object"===typeof f?"render":"define"].apply(template,arguments)};(function(c,f){c.version="1.0";c.openTag="<%";c.closeTag="%>";c.statement=null;c.render=function(a,b){var d;d=h[a];void 0===d&&!q&&((d=document.getElementById(a))&&c.define(a,d.value||d.innerHTML),d=h[a]);return void 0===d?i({id:a,name:"Render Error",message:"Not Cache"}):d(b)};c.define=function(a,b,d){var k=d;"string"!==typeof b&&(k=b,b=a,a=null);try{var f=c.compiled(b,k)}catch(l){return l.id=a,l.name="Syntax Error",i(l)}d=function(d){try{return f.call(d,d,n)}catch(e){if(!k)return c.define(a,b,true)(d);e.id=a||b;e.name="Render Error";e.source=b;return i(e)}};a&&(h[a]=d);return d};c.compiled=function(a,b){function d(a){m+=a.split(/\n/).length-1;a=a.replace(/('|"|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");return a=j[1]+"'"+a+"'"+j[2]}function k(a){var d=m;h?a=h(a):b&&(a=a.replace(/\n/g,function(){m++;return"$line="+m+";"}));0===a.indexOf("=")&&(a=j[1]+(o?"$getValue(":"")+a.substring(1).replace(/^\s+|([;]\s*)$/,"")+(o?")":"")+j[2]);b&&(a="$line="+d+";"+a);f(a);return a}function f(a){a=a.replace(/\/\*.*?\*\/|'[^']*'|"[^"]*"|\.[\$\w]+/g,"");p.call(a.split(/[^\$\w\d]+/),function(a){if(/^(this|\$methods)$/.test(a))throw{message:'Prohibit the use of the "'+a+'"'};a&&!s[a]&&!/^\d/.test(a)&&!i[a]&&(r+=a+"="+("include"===a?q:n[a]?"$methods."+a:"$data."+a)+",",i[a]=!0)})}var l=c.closeTag,h=c.statement,e,g="",m=1,i={$out:!0,$line:!0},r=b?"var $line=0,":"var ",j=o?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],q="function(id,data){if(data===undefined){data=$data}return $methods.$render(id,data)}";p.call(a.split(c.openTag),function(a){var a=a.split(l),b=a[0],c=a[1];1===a.length?g+=d(b):(g+=k(b),c&&(g+=d(c)))});e=g;b&&(e="try{"+e+"}catch(e){e.line=$line;throw e}");e=r+j[0]+e+"return "+j[3];try{return new Function("$data","$methods",e)}catch(t){throw t.temp="function anonymous($data,$methods) {"+e+"}",t;}};c.method=function(a,b){if(void 0===b)return n[a];n[a]=b};var h={},n={},o="".trim,q=o&&!f.document,i=function(a){var b="[template]:\n"+a.id+"\n\n[name]:\n"+a.name;a.message&&(b+="\n\n[message]:\n"+a.message);a.line&&(b+="\n\n[line]:\n"+a.line,b+="\n\n[source]:\n"+a.source.split(/\n/)[a.line-1]);a.temp&&(b+="\n\n[temp]:\n"+a.temp);f.console&&console.error(b);return"{Template Error}"},p=Array.prototype.forEach||function(a,b){for(var d=this.length>>>0,c=0;c<d;c++)c in this&&a.call(b,this[c],c,this)},s={};p.call("break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield".split(","),function(a){s[a]=true});c.method("$forEach",p);c.method("$render",c.render);c.method("$getValue",function(a){return void 0===a?"":a})})(template,this);"undefined"!==typeof module&&module.exports&&(module.exports=template);